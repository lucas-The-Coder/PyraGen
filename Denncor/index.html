<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta
      name="description"
      content="Denncor - Domestic Security Technologies in Cape Town"
    />

    <title>Denncor | Security Technologies</title>

    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <header>
      <div class="container">
        <h1><a href="#">Denncor</a></h1>

        <nav>
          <ul>
            <li><a href="#about">About</a></li>

            <li><a href="#products">Products</a></li>

            <li><a href="#contact">Contact</a></li>

            <li><a href="/login/login.html">Login</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main>
      <!-- Slideshow container -->
      <div class="slideshow-container">
        <!-- Full-width images with number and caption text -->
        <div class="mySlides fade">
          <div class="numbertext">1 / 3</div>
          <img src="/signUp/peakpx.jpg" style="width: 100%" />
          <div class="text">Caption Text</div>
        </div>

        <div class="mySlides fade">
          <div class="numbertext">2 / 3</div>
          <img src="/signUp/peakpx.jpg" style="width: 100%" />
          <div class="text">Caption Two</div>
        </div>

        <div class="mySlides fade">
          <div class="numbertext">3 / 3</div>
          <img src="/signUp/peakpx.jpg" style="width: 100%" />
          <div class="text">Caption Three</div>
        </div>

        <!-- Next and previous buttons -->
        <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
        <a class="next" onclick="plusSlides(1)">&#10095;</a>
      </div>
      <br />

      <!-- The dots/circles -->
      <div style="text-align: center">
        <span class="dot" onclick="currentSlide(1)"></span>
        <span class="dot" onclick="currentSlide(2)"></span>
        <span class="dot" onclick="currentSlide(3)"></span>
      </div>
      <section id="hero">
        <h2>Secure Your Home with Cutting-Edge Technology</h2>

        <p>We provide top-notch security systems for your peace of mind.</p>

        <a href="#products" class="cta">Explore Products</a>
      </section>

      <section id="about">
        <h2>About Denncor</h2>

        <p>
          Denncor specializes in domestic security technologies in Cape Town,
          South Africa. Our products include Intrusion Alarm Systems, Video
          Surveillance, Intercom Systems, and Gate Automation.
        </p>
      </section>

      <section id="products">
        <h2>Our Products</h2>

        <div class="product-list">
          <div class="product">
            <h3>Intrusion Alarm Systems</h3>

            <p>State-of-the-art alarm systems to keep your home secure.</p>
          </div>

          <div class="product">
            <h3>Video Surveillance</h3>

            <p>24/7 monitoring with high-definition cameras.</p>
          </div>

          <!-- Add more products as needed -->
        </div>
      </section>

      <section id="contact">
        <h2>Contact Us</h2>

        <form id="newsletter">
          <label for="email">Subscribe to our Newsletter:</label>

          <input
            type="email"
            id="email"
            placeholder="Enter your email"
            required
          />

          <button type="submit">Subscribe</button>
        </form>
      </section>
    </main>

    <footer>
      <p>
        &copy; 2025 Denncor. All Rights Reserved. |
        <a id="email-link" href="mailto:support@denncor.co.za"
          >support@denncor.co.za</a
        >
      </p>
    </footer>

    <script src="script.js"></script>
    <script>
      // Check if the user is already logged in
      setTimeout(function () {
        const authToken = localStorage.getItem("authToken");
        if (authToken) {
          const token = authToken.split(".")[1];
          const userInfo = JSON.parse(atob(token));
          console.log("User Info:", userInfo);

          // Replace the login link with the username and profile picture
          const loginLink = document.querySelector("nav ul li:last-child a");
          loginLink.innerHTML = `
             <h3 id="greet">${userInfo.name}</h3>
             <img src="${userInfo.picture}" alt="Profile Picture"/>
           `;
          loginLink.href = "/profile/user.html"; // Remove the link to the login page
        }
      }, 100);
    </script>

    <!-- Add this script to the index.html file -->
    <script>
      // Check if the user is already logged in
      setTimeout(function () {
        const authToken = localStorage.getItem("authToken");
        if (authToken) {
          // Call the apiRequest function from authToken.js to get the user's info
          const response = apiRequest("/api/user", "GET", null);
          if (response.error) {
            console.error(response.error);
          } else {
            const userInfo = response.userInfo;
            console.log("User Info:", userInfo);

            // Replace the login link with the username and profile picture
            const loginLink = document.querySelector("nav ul li:last-child a");
            loginLink.innerHTML = `
          <h3 id="greet">${userInfo.firstName} ${userInfo.lastName}</h3>
          <img src="${userInfo.picture}" alt="Profile Picture"/>
        `;
            loginLink.href = "/profile/user.html"; // Remove the link to the login page
          }
        }
      }, 100);
    </script>

    <script>
      window.onload = function () {
        const authToken = localStorage.getItem("authToken");
        if (authToken) {
          const userData = JSON.parse(localStorage.getItem("userData"));
          const navBar = document.querySelector("nav");
          const loginButton = document.querySelector("nav ul li:last-child a");
          loginButton.innerHTML = `
      <h3 id="greet">${userData.firstName} ${userData.lastName}</h3>
    `;
          loginButton.href = "/google/logout.html";
        }
      };
    </script>

    <!-- Slideshow -->
    <script>
      let slideIndex = 0;
      showSlides();

      function showSlides() {
        let i;
        let slides = document.getElementsByClassName("mySlides");
        for (i = 0; i < slides.length; i++) {
          slides[i].style.display = "none";
        }
        slideIndex++;
        if (slideIndex > slides.length) {
          slideIndex = 1;
        }
        slides[slideIndex - 1].style.display = "block";
        setTimeout(showSlides, 2000); // Change image every 2 seconds
      }

      function plusSlides(n) {
        showSlides((slideIndex += n));
      }

      function currentSlide(n) {
        showSlides((slideIndex = n));
      }
    </script>
  </body>
</html>
